<div class="cell-display-face">
    <div><p class="glitch"></p></div>
</div>

<style>
    .cell-display-face p {
        font-size: 5vw;
        margin: 0;
        padding: 0;
    }
</style>

<script>
    const faces = {
        sleep: ['ᓚ₍^- .-^₎', '₍ᐢ. .ᐢ₎', '>⩊<', '₍^. .^₎⟆', '(˶ᵔ ᵕ ᵔ˶)', '(っᵔ◡ᵔ)っ'],
        light: ['>⩊<', ':)', '(っᵔ◡ᵔ)っ', '(˶˃⤙˂˶)', '＼(＾O＾)／', '\( ﾟヮﾟ)/'],
        mean: ['>⩊<', '(≖_≖ )', '(ᵕ—ᴗ—)', '(-_-)', 'ᗜ⩊ᗜ', '(˶˃⤙˂˶)', '(っᵔ◡ᵔ)っ'],
        high: ['>⩊<', '(つ╥﹏╥)つ', '(˶˃⤙˂˶)', '(×_×)', ':(', '(ó﹏ò｡)', '(ᵕ—ᴗ—)']
    }

    const face_terminal = document.querySelector('.cell-display-face p')

    const apply_face = () => {
        // Choose a face randomly, with consideration for RAM load and time
        // Warning: RAM module must be running for this to work

        let time = new Date().getHours()
        let load = document.querySelector('.cell-stat-ram span').innerHTML.replace('%', '')

        let batch = faces.sleep
        if      (load > 70) batch = faces.high
        else if (load > 55) batch = faces.mean
        else if (load > 15) batch = faces.light
        if (load < 65 && (time >= 22 || time < 7)) batch = faces.sleep

        // Select random face from that batch
        let face = batch[Math.floor(Math.random() * batch.length)]
        face_terminal.title = face_terminal.innerHTML = face
        face_terminal.style.fontSize = `min(calc(40vw / ${face.length}), 180px)`
    }

    apply_face()
    setInterval(apply_face, 40 * 1000)
</script>